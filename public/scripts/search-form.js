import { renderBlock } from './lib.js';
export function searchFormData(id) {
    const form = document.querySelector('#form');
    const inputElement = form.querySelector(id);
    if (inputElement != null) {
        return inputElement.value;
    }
}
export let dataFromForm = {};
export function transferData() {
    const form = document.querySelector('#form');
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        dataFromForm = {
            city: searchFormData('#city'),
            checkInDate: searchFormData('#check-in-date'),
            checkOutDate: searchFormData('#check-out-date'),
            maxPrice: parseInt(searchFormData('#max-price'))
        };
        form.reset();
        search(dataFromForm, callbackForSearch);
    });
}
// export function search(object: FormObject): void {
//   console.log(object)
// }
function callbackForSearch(res) {
    console.log(res);
}
export function search(object, callback) {
    console.log(object);
    const arr = [{}, {}];
    setTimeout(() => {
        callback(Math.random() < 0.5 ? 'Error' : arr);
    }, 1000);
}
export function renderSearchFormBlock(dateCheckIn, dateCheckout) {
    const TWO_DAYS = 2;
    const ONE_MONTH = 1;
    const TWO_MONTHS = 2;
    const today = new Date;
    // минимально возможная дата заселения и выселения
    const min = `${today.getFullYear()}-${('0' + (today.getMonth() + ONE_MONTH)).slice(-2)}-${today.getDate()}`;
    // максимально возможная дата заселения выселения
    function findMax(objDate) {
        const lastDayOfNextMonth = new Date(objDate.getFullYear(), objDate.getMonth() + TWO_MONTHS, 0);
        return `${lastDayOfNextMonth.getFullYear()}-${('0' + (lastDayOfNextMonth.getMonth() + ONE_MONTH)).slice(-2)}-${lastDayOfNextMonth.getDate()}`;
    }
    //переведенная в нужный формат дата заезда по умолчанию
    const defaultDCI = new Date(today.setDate(today.getDate() + 1));
    const transformedDefaultDCI = `${defaultDCI.getFullYear()}-${('0' + (defaultDCI.getMonth() + ONE_MONTH)).slice(-2)}-${defaultDCI.getDate()}`;
    //функция возвращает выезд по умолчанию для даты заезда по умолчанию и для введенной даты заезда
    function defaultCheckout(objDate) {
        const defaultDCO = new Date(objDate.setDate(objDate.getDate() + TWO_DAYS));
        return `${defaultDCO.getFullYear()}-${('0' + (defaultDCO.getMonth() + ONE_MONTH)).slice(-2)}-${('0' + defaultDCO.getDate()).slice(-2)}`;
    }
    let checkIn;
    let checkOut;
    let maxCheckOut;
    let maxDefault;
    let minCheckout;
    if (dateCheckIn === '') {
        checkIn = transformedDefaultDCI;
        checkOut = (dateCheckout === '') ? defaultCheckout(defaultDCI) : dateCheckout;
        maxDefault = findMax(defaultDCI);
        maxCheckOut = findMax(defaultDCI);
        minCheckout = transformedDefaultDCI;
    }
    else {
        const dciInToObj = new Date(dateCheckIn);
        console.log(dciInToObj);
        const dci = `${dciInToObj.getFullYear()}-${('0' + (dciInToObj.getMonth() + ONE_MONTH)).slice(-2)}-${('0' + dciInToObj.getDate()).slice(-2)}`;
        checkIn = dci;
        checkOut = (dateCheckout === '') ? defaultCheckout(dciInToObj) : dateCheckout;
        maxDefault = findMax(dciInToObj);
        minCheckout = dci;
        maxCheckOut = findMax(dciInToObj);
    }
    renderBlock('search-form-block', `
    <form id="form">
      <fieldset class="search-filedset">
      <form>
        <div class="row">
          <div>
            <label for="city">Город</label>
            <input id="city" type="text"  value="" />
            <input type="hidden" disabled value="59.9386,30.3141" />
          </div>
          <!--<div class="providers">
            <label><input type="checkbox" name="provider" value="homy" checked /> Homy</label>
            <label><input type="checkbox" name="provider" value="flat-rent" checked /> FlatRent</label>
          </div>--!>
        </div>
        <div class="row">
          <div>
            <label for="check-in-date">Дата заезда</label>
            <input id="check-in-date" type="date" value="${checkIn}" 
            min="${min}" max="${maxDefault}" name="checkin" />
  </div>
  <div>
  <label for="check-out-date"> Дата выезда </label>
    <input id="check-out-date" type ="date" value="${checkOut}" min="${minCheckout}" max="${maxCheckOut}" name="checkout"/>
      </div>
      <div>
      <label for="max-price"> Макс.цена суток </label>
        <input id="max-price" type="text" value="" name="price" class="max-price"/>
          </div>
          <div>
          <div><button type="submit">Найти </button></div>
          </div>
          </div>
          </form>
          </fieldset>
          </form>
            `);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLWZvcm0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2VhcmNoLWZvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQVl2QyxNQUFNLFVBQVUsY0FBYyxDQUFDLEVBQVU7SUFDdkMsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM3QyxNQUFNLFlBQVksR0FBcUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQTtJQUM3RCxJQUFJLFlBQVksSUFBSSxJQUFJLEVBQUU7UUFDeEIsT0FBTyxZQUFZLENBQUMsS0FBSyxDQUFBO0tBQzFCO0FBQ0gsQ0FBQztBQUNELE1BQU0sQ0FBQyxJQUFJLFlBQVksR0FBZSxFQUFFLENBQUM7QUFDekMsTUFBTSxVQUFVLFlBQVk7SUFDMUIsTUFBTSxJQUFJLEdBQW9CLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDOUQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO1FBQ3BDLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUNuQixZQUFZLEdBQUc7WUFDYixJQUFJLEVBQUUsY0FBYyxDQUFDLE9BQU8sQ0FBQztZQUM3QixXQUFXLEVBQUUsY0FBYyxDQUFDLGdCQUFnQixDQUFDO1lBQzdDLFlBQVksRUFBRSxjQUFjLENBQUMsaUJBQWlCLENBQUM7WUFDL0MsUUFBUSxFQUFFLFFBQVEsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDakQsQ0FBQztRQUNGLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNiLE1BQU0sQ0FBQyxZQUFZLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFFRCxxREFBcUQ7QUFDckQsd0JBQXdCO0FBQ3hCLElBQUk7QUFDSixTQUFTLGlCQUFpQixDQUFDLEdBQTBCO0lBQ25ELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkIsQ0FBQztBQUVELE1BQU0sVUFBVSxNQUFNLENBQUMsTUFBa0IsRUFBRSxRQUE4QztJQUN2RixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3BCLE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBVyxFQUFFLEVBQVcsQ0FBQyxDQUFDO0lBQ3ZDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUMvQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDWCxDQUFDO0FBR0QsTUFBTSxVQUFVLHFCQUFxQixDQUFDLFdBQW1CLEVBQUUsWUFBb0I7SUFDN0UsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQztJQUNwQixNQUFNLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFHckIsTUFBTSxLQUFLLEdBQVMsSUFBSSxJQUFJLENBQUM7SUFDN0Isa0RBQWtEO0lBQ2xELE1BQU0sR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7SUFFNUcsaURBQWlEO0lBQ2pELFNBQVMsT0FBTyxDQUFDLE9BQWE7UUFDNUIsTUFBTSxrQkFBa0IsR0FBUyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRyxPQUFPLEdBQUcsa0JBQWtCLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLEVBQUUsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7SUFDaEosQ0FBQztJQUVELHVEQUF1RDtJQUV2RCxNQUFNLFVBQVUsR0FBUyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RFLE1BQU0scUJBQXFCLEdBQUcsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQTtJQUU1SSxnR0FBZ0c7SUFDaEcsU0FBUyxlQUFlLENBQUMsT0FBYTtRQUNwQyxNQUFNLFVBQVUsR0FBUyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLE9BQU8sR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQzFJLENBQUM7SUFDRCxJQUFJLE9BQWUsQ0FBQztJQUNwQixJQUFJLFFBQWdCLENBQUM7SUFDckIsSUFBSSxXQUFtQixDQUFDO0lBQ3hCLElBQUksVUFBa0IsQ0FBQztJQUN2QixJQUFJLFdBQW1CLENBQUM7SUFFeEIsSUFBSSxXQUFXLEtBQUssRUFBRSxFQUFFO1FBRXRCLE9BQU8sR0FBRyxxQkFBcUIsQ0FBQztRQUNoQyxRQUFRLEdBQUcsQ0FBQyxZQUFZLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO1FBQzlFLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNsQyxXQUFXLEdBQUcscUJBQXFCLENBQUE7S0FDcEM7U0FBTTtRQUNMLE1BQU0sVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDeEIsTUFBTSxHQUFHLEdBQUcsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQzVJLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDZCxRQUFRLEdBQUcsQ0FBQyxZQUFZLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO1FBQzlFLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDaEMsV0FBVyxHQUFHLEdBQUcsQ0FBQztRQUNsQixXQUFXLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ25DO0lBRUQsV0FBVyxDQUNULG1CQUFtQixFQUNuQjs7Ozs7Ozs7Ozs7Ozs7Ozs7OzJEQWtCdUQsT0FBTzttQkFDL0MsR0FBRyxVQUFVLFVBQVU7Ozs7cURBSVcsUUFBUSxVQUFVLFdBQVcsVUFBVSxXQUFXOzs7Ozs7Ozs7Ozs7O2FBYTFGLENBQ1YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXJCbG9jayB9IGZyb20gJy4vbGliLmpzJztcblxuaW50ZXJmYWNlIEZvcm1PYmplY3Qge1xuICBjaXR5Pzogc3RyaW5nXG4gIGNoZWNrSW5EYXRlPzogc3RyaW5nXG4gIGNoZWNrT3V0RGF0ZT86IHN0cmluZ1xuICBtYXhQcmljZT86IG51bWJlclxufVxuaW50ZXJmYWNlIFBsYWNlIHtcbiAgcGxhY2U6IHN0cmluZ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoRm9ybURhdGEoaWQ6IHN0cmluZykge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0nKTtcbiAgY29uc3QgaW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKGlkKVxuICBpZiAoaW5wdXRFbGVtZW50ICE9IG51bGwpIHtcbiAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbHVlXG4gIH1cbn1cbmV4cG9ydCBsZXQgZGF0YUZyb21Gb3JtOiBGb3JtT2JqZWN0ID0ge307XG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmZXJEYXRhKCkge1xuICBjb25zdCBmb3JtOiBIVE1MRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybScpO1xuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGRhdGFGcm9tRm9ybSA9IHtcbiAgICAgIGNpdHk6IHNlYXJjaEZvcm1EYXRhKCcjY2l0eScpLFxuICAgICAgY2hlY2tJbkRhdGU6IHNlYXJjaEZvcm1EYXRhKCcjY2hlY2staW4tZGF0ZScpLFxuICAgICAgY2hlY2tPdXREYXRlOiBzZWFyY2hGb3JtRGF0YSgnI2NoZWNrLW91dC1kYXRlJyksXG4gICAgICBtYXhQcmljZTogcGFyc2VJbnQoc2VhcmNoRm9ybURhdGEoJyNtYXgtcHJpY2UnKSlcbiAgICB9O1xuICAgIGZvcm0ucmVzZXQoKTtcbiAgICBzZWFyY2goZGF0YUZyb21Gb3JtLCBjYWxsYmFja0ZvclNlYXJjaCk7XG4gIH0pXG59XG5cbi8vIGV4cG9ydCBmdW5jdGlvbiBzZWFyY2gob2JqZWN0OiBGb3JtT2JqZWN0KTogdm9pZCB7XG4vLyAgIGNvbnNvbGUubG9nKG9iamVjdClcbi8vIH1cbmZ1bmN0aW9uIGNhbGxiYWNrRm9yU2VhcmNoKHJlczogc3RyaW5nIHwgQXJyYXk8UGxhY2U+KSB7XG4gIGNvbnNvbGUubG9nKHJlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2gob2JqZWN0OiBGb3JtT2JqZWN0LCBjYWxsYmFjazogKHJlczogc3RyaW5nIHwgQXJyYXk8UGxhY2U+KSA9PiB2b2lkKTogdm9pZCB7XG4gIGNvbnNvbGUubG9nKG9iamVjdCk7XG4gIGNvbnN0IGFyciA9IFt7fSBhcyBQbGFjZSwge30gYXMgUGxhY2VdO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBjYWxsYmFjayhNYXRoLnJhbmRvbSgpIDwgMC41ID8gJ0Vycm9yJyA6IGFycilcbiAgfSwgMTAwMCk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclNlYXJjaEZvcm1CbG9jayhkYXRlQ2hlY2tJbjogc3RyaW5nLCBkYXRlQ2hlY2tvdXQ6IHN0cmluZykge1xuICBjb25zdCBUV09fREFZUyA9IDI7XG4gIGNvbnN0IE9ORV9NT05USCA9IDE7XG4gIGNvbnN0IFRXT19NT05USFMgPSAyO1xuXG5cbiAgY29uc3QgdG9kYXk6IERhdGUgPSBuZXcgRGF0ZTtcbiAgLy8g0LzQuNC90LjQvNCw0LvRjNC90L4g0LLQvtC30LzQvtC20L3QsNGPINC00LDRgtCwINC30LDRgdC10LvQtdC90LjRjyDQuCDQstGL0YHQtdC70LXQvdC40Y9cbiAgY29uc3QgbWluID0gYCR7dG9kYXkuZ2V0RnVsbFllYXIoKX0tJHsoJzAnICsgKHRvZGF5LmdldE1vbnRoKCkgKyBPTkVfTU9OVEgpKS5zbGljZSgtMil9LSR7dG9kYXkuZ2V0RGF0ZSgpfWA7XG5cbiAgLy8g0LzQsNC60YHQuNC80LDQu9GM0L3QviDQstC+0LfQvNC+0LbQvdCw0Y8g0LTQsNGC0LAg0LfQsNGB0LXQu9C10L3QuNGPINCy0YvRgdC10LvQtdC90LjRj1xuICBmdW5jdGlvbiBmaW5kTWF4KG9iakRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxhc3REYXlPZk5leHRNb250aDogRGF0ZSA9IG5ldyBEYXRlKG9iakRhdGUuZ2V0RnVsbFllYXIoKSwgb2JqRGF0ZS5nZXRNb250aCgpICsgVFdPX01PTlRIUywgMCk7XG4gICAgcmV0dXJuIGAke2xhc3REYXlPZk5leHRNb250aC5nZXRGdWxsWWVhcigpfS0keygnMCcgKyAobGFzdERheU9mTmV4dE1vbnRoLmdldE1vbnRoKCkgKyBPTkVfTU9OVEgpKS5zbGljZSgtMil9LSR7bGFzdERheU9mTmV4dE1vbnRoLmdldERhdGUoKX1gO1xuICB9XG5cbiAgLy/Qv9C10YDQtdCy0LXQtNC10L3QvdCw0Y8g0LIg0L3Rg9C20L3Ri9C5INGE0L7RgNC80LDRgiDQtNCw0YLQsCDQt9Cw0LXQt9C00LAg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cblxuICBjb25zdCBkZWZhdWx0RENJOiBEYXRlID0gbmV3IERhdGUodG9kYXkuc2V0RGF0ZSh0b2RheS5nZXREYXRlKCkgKyAxKSk7XG4gIGNvbnN0IHRyYW5zZm9ybWVkRGVmYXVsdERDSSA9IGAke2RlZmF1bHREQ0kuZ2V0RnVsbFllYXIoKX0tJHsoJzAnICsgKGRlZmF1bHREQ0kuZ2V0TW9udGgoKSArIE9ORV9NT05USCkpLnNsaWNlKC0yKX0tJHtkZWZhdWx0RENJLmdldERhdGUoKX1gXG5cbiAgLy/RhNGD0L3QutGG0LjRjyDQstC+0LfQstGA0LDRidCw0LXRgiDQstGL0LXQt9C0INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOINC00LvRjyDQtNCw0YLRiyDQt9Cw0LXQt9C00LAg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y4g0Lgg0LTQu9GPINCy0LLQtdC00LXQvdC90L7QuSDQtNCw0YLRiyDQt9Cw0LXQt9C00LBcbiAgZnVuY3Rpb24gZGVmYXVsdENoZWNrb3V0KG9iakRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlZmF1bHREQ086IERhdGUgPSBuZXcgRGF0ZShvYmpEYXRlLnNldERhdGUob2JqRGF0ZS5nZXREYXRlKCkgKyBUV09fREFZUykpO1xuICAgIHJldHVybiBgJHtkZWZhdWx0RENPLmdldEZ1bGxZZWFyKCl9LSR7KCcwJyArIChkZWZhdWx0RENPLmdldE1vbnRoKCkgKyBPTkVfTU9OVEgpKS5zbGljZSgtMil9LSR7KCcwJyArIGRlZmF1bHREQ08uZ2V0RGF0ZSgpKS5zbGljZSgtMil9YDtcbiAgfVxuICBsZXQgY2hlY2tJbjogc3RyaW5nO1xuICBsZXQgY2hlY2tPdXQ6IHN0cmluZztcbiAgbGV0IG1heENoZWNrT3V0OiBzdHJpbmc7XG4gIGxldCBtYXhEZWZhdWx0OiBzdHJpbmc7XG4gIGxldCBtaW5DaGVja291dDogc3RyaW5nO1xuXG4gIGlmIChkYXRlQ2hlY2tJbiA9PT0gJycpIHtcblxuICAgIGNoZWNrSW4gPSB0cmFuc2Zvcm1lZERlZmF1bHREQ0k7XG4gICAgY2hlY2tPdXQgPSAoZGF0ZUNoZWNrb3V0ID09PSAnJykgPyBkZWZhdWx0Q2hlY2tvdXQoZGVmYXVsdERDSSkgOiBkYXRlQ2hlY2tvdXQ7XG4gICAgbWF4RGVmYXVsdCA9IGZpbmRNYXgoZGVmYXVsdERDSSk7XG4gICAgbWF4Q2hlY2tPdXQgPSBmaW5kTWF4KGRlZmF1bHREQ0kpO1xuICAgIG1pbkNoZWNrb3V0ID0gdHJhbnNmb3JtZWREZWZhdWx0RENJXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZGNpSW5Ub09iaiA9IG5ldyBEYXRlKGRhdGVDaGVja0luKTtcbiAgICBjb25zb2xlLmxvZyhkY2lJblRvT2JqKTtcbiAgICBjb25zdCBkY2kgPSBgJHtkY2lJblRvT2JqLmdldEZ1bGxZZWFyKCl9LSR7KCcwJyArIChkY2lJblRvT2JqLmdldE1vbnRoKCkgKyBPTkVfTU9OVEgpKS5zbGljZSgtMil9LSR7KCcwJyArIGRjaUluVG9PYmouZ2V0RGF0ZSgpKS5zbGljZSgtMil9YFxuICAgIGNoZWNrSW4gPSBkY2k7XG4gICAgY2hlY2tPdXQgPSAoZGF0ZUNoZWNrb3V0ID09PSAnJykgPyBkZWZhdWx0Q2hlY2tvdXQoZGNpSW5Ub09iaikgOiBkYXRlQ2hlY2tvdXQ7XG4gICAgbWF4RGVmYXVsdCA9IGZpbmRNYXgoZGNpSW5Ub09iailcbiAgICBtaW5DaGVja291dCA9IGRjaTtcbiAgICBtYXhDaGVja091dCA9IGZpbmRNYXgoZGNpSW5Ub09iaik7XG4gIH1cblxuICByZW5kZXJCbG9jayhcbiAgICAnc2VhcmNoLWZvcm0tYmxvY2snLFxuICAgIGBcbiAgICA8Zm9ybSBpZD1cImZvcm1cIj5cbiAgICAgIDxmaWVsZHNldCBjbGFzcz1cInNlYXJjaC1maWxlZHNldFwiPlxuICAgICAgPGZvcm0+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNpdHlcIj7Qk9C+0YDQvtC0PC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCBpZD1cImNpdHlcIiB0eXBlPVwidGV4dFwiICB2YWx1ZT1cIlwiIC8+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIGRpc2FibGVkIHZhbHVlPVwiNTkuOTM4NiwzMC4zMTQxXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8IS0tPGRpdiBjbGFzcz1cInByb3ZpZGVyc1wiPlxuICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwicHJvdmlkZXJcIiB2YWx1ZT1cImhvbXlcIiBjaGVja2VkIC8+IEhvbXk8L2xhYmVsPlxuICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwicHJvdmlkZXJcIiB2YWx1ZT1cImZsYXQtcmVudFwiIGNoZWNrZWQgLz4gRmxhdFJlbnQ8L2xhYmVsPlxuICAgICAgICAgIDwvZGl2Pi0tIT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNoZWNrLWluLWRhdGVcIj7QlNCw0YLQsCDQt9Cw0LXQt9C00LA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IGlkPVwiY2hlY2staW4tZGF0ZVwiIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIke2NoZWNrSW59XCIgXG4gICAgICAgICAgICBtaW49XCIke21pbn1cIiBtYXg9XCIke21heERlZmF1bHR9XCIgbmFtZT1cImNoZWNraW5cIiAvPlxuICA8L2Rpdj5cbiAgPGRpdj5cbiAgPGxhYmVsIGZvcj1cImNoZWNrLW91dC1kYXRlXCI+INCU0LDRgtCwINCy0YvQtdC30LTQsCA8L2xhYmVsPlxuICAgIDxpbnB1dCBpZD1cImNoZWNrLW91dC1kYXRlXCIgdHlwZSA9XCJkYXRlXCIgdmFsdWU9XCIke2NoZWNrT3V0fVwiIG1pbj1cIiR7bWluQ2hlY2tvdXR9XCIgbWF4PVwiJHttYXhDaGVja091dH1cIiBuYW1lPVwiY2hlY2tvdXRcIi8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+XG4gICAgICA8bGFiZWwgZm9yPVwibWF4LXByaWNlXCI+INCc0LDQutGBLtGG0LXQvdCwINGB0YPRgtC+0LogPC9sYWJlbD5cbiAgICAgICAgPGlucHV0IGlkPVwibWF4LXByaWNlXCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmljZVwiIGNsYXNzPVwibWF4LXByaWNlXCIvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgPGRpdj48YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj7QndCw0LnRgtC4IDwvYnV0dG9uPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICA8L2ZpZWxkc2V0PlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgIGBcbiAgKTtcbn1cbiJdfQ==